## Подготовка данных


```python
import pandas as pd
import numpy as np
import warnings
warnings.simplefilter("ignore")

from sklearn.preprocessing import StandardScaler 
from sklearn.preprocessing import OrdinalEncoder
from sklearn.model_selection import train_test_split
from sklearn.metrics import mean_squared_error
from sklearn.metrics import r2_score
from sklearn.metrics import mean_absolute_percentage_error

from sklearn.linear_model import LinearRegression
from sklearn.tree import DecisionTreeRegressor
from sklearn.ensemble import RandomForestRegressor
from sklearn.linear_model import LogisticRegression
from sklearn.dummy import DummyRegressor
from lightgbm import LGBMRegressor
```


```python
# просмотр, где находится каталог с файлами на COLAB
from google.colab import drive
drive.mount('/content/drive')
```

    Mounted at /content/drive
    


```python
# получение доступа к каталогу и уточнение названия папок
import os
os.listdir('/content/drive/My Drive/Colab Notebooks/Яндекс/Проект 9 Определение стоимости автомобилей/ДАННЫЕ')
```




    ['autos.csv']




```python
# загрузка данных
df = pd.read_csv('/content/drive/My Drive/Colab Notebooks/Яндекс/Проект 9 Определение стоимости автомобилей/ДАННЫЕ/autos.csv')
```


```python
#df = pd.read_csv('/datasets/autos.csv')
```


```python
df
```





  <div id="df-2b062a32-0bfc-4172-8e1c-6a48886c398e">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DateCrawled</th>
      <th>Price</th>
      <th>VehicleType</th>
      <th>RegistrationYear</th>
      <th>Gearbox</th>
      <th>Power</th>
      <th>Model</th>
      <th>Kilometer</th>
      <th>RegistrationMonth</th>
      <th>FuelType</th>
      <th>Brand</th>
      <th>NotRepaired</th>
      <th>DateCreated</th>
      <th>NumberOfPictures</th>
      <th>PostalCode</th>
      <th>LastSeen</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2016-03-24 11:52:17</td>
      <td>480</td>
      <td>NaN</td>
      <td>1993</td>
      <td>manual</td>
      <td>0</td>
      <td>golf</td>
      <td>150000</td>
      <td>0</td>
      <td>petrol</td>
      <td>volkswagen</td>
      <td>NaN</td>
      <td>2016-03-24 00:00:00</td>
      <td>0</td>
      <td>70435</td>
      <td>2016-04-07 03:16:57</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2016-03-24 10:58:45</td>
      <td>18300</td>
      <td>coupe</td>
      <td>2011</td>
      <td>manual</td>
      <td>190</td>
      <td>NaN</td>
      <td>125000</td>
      <td>5</td>
      <td>gasoline</td>
      <td>audi</td>
      <td>yes</td>
      <td>2016-03-24 00:00:00</td>
      <td>0</td>
      <td>66954</td>
      <td>2016-04-07 01:46:50</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2016-03-14 12:52:21</td>
      <td>9800</td>
      <td>suv</td>
      <td>2004</td>
      <td>auto</td>
      <td>163</td>
      <td>grand</td>
      <td>125000</td>
      <td>8</td>
      <td>gasoline</td>
      <td>jeep</td>
      <td>NaN</td>
      <td>2016-03-14 00:00:00</td>
      <td>0</td>
      <td>90480</td>
      <td>2016-04-05 12:47:46</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2016-03-17 16:54:04</td>
      <td>1500</td>
      <td>small</td>
      <td>2001</td>
      <td>manual</td>
      <td>75</td>
      <td>golf</td>
      <td>150000</td>
      <td>6</td>
      <td>petrol</td>
      <td>volkswagen</td>
      <td>no</td>
      <td>2016-03-17 00:00:00</td>
      <td>0</td>
      <td>91074</td>
      <td>2016-03-17 17:40:17</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2016-03-31 17:25:20</td>
      <td>3600</td>
      <td>small</td>
      <td>2008</td>
      <td>manual</td>
      <td>69</td>
      <td>fabia</td>
      <td>90000</td>
      <td>7</td>
      <td>gasoline</td>
      <td>skoda</td>
      <td>no</td>
      <td>2016-03-31 00:00:00</td>
      <td>0</td>
      <td>60437</td>
      <td>2016-04-06 10:17:21</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>354364</th>
      <td>2016-03-21 09:50:58</td>
      <td>0</td>
      <td>NaN</td>
      <td>2005</td>
      <td>manual</td>
      <td>0</td>
      <td>colt</td>
      <td>150000</td>
      <td>7</td>
      <td>petrol</td>
      <td>mitsubishi</td>
      <td>yes</td>
      <td>2016-03-21 00:00:00</td>
      <td>0</td>
      <td>2694</td>
      <td>2016-03-21 10:42:49</td>
    </tr>
    <tr>
      <th>354365</th>
      <td>2016-03-14 17:48:27</td>
      <td>2200</td>
      <td>NaN</td>
      <td>2005</td>
      <td>NaN</td>
      <td>0</td>
      <td>NaN</td>
      <td>20000</td>
      <td>1</td>
      <td>NaN</td>
      <td>sonstige_autos</td>
      <td>NaN</td>
      <td>2016-03-14 00:00:00</td>
      <td>0</td>
      <td>39576</td>
      <td>2016-04-06 00:46:52</td>
    </tr>
    <tr>
      <th>354366</th>
      <td>2016-03-05 19:56:21</td>
      <td>1199</td>
      <td>convertible</td>
      <td>2000</td>
      <td>auto</td>
      <td>101</td>
      <td>fortwo</td>
      <td>125000</td>
      <td>3</td>
      <td>petrol</td>
      <td>smart</td>
      <td>no</td>
      <td>2016-03-05 00:00:00</td>
      <td>0</td>
      <td>26135</td>
      <td>2016-03-11 18:17:12</td>
    </tr>
    <tr>
      <th>354367</th>
      <td>2016-03-19 18:57:12</td>
      <td>9200</td>
      <td>bus</td>
      <td>1996</td>
      <td>manual</td>
      <td>102</td>
      <td>transporter</td>
      <td>150000</td>
      <td>3</td>
      <td>gasoline</td>
      <td>volkswagen</td>
      <td>no</td>
      <td>2016-03-19 00:00:00</td>
      <td>0</td>
      <td>87439</td>
      <td>2016-04-07 07:15:26</td>
    </tr>
    <tr>
      <th>354368</th>
      <td>2016-03-20 19:41:08</td>
      <td>3400</td>
      <td>wagon</td>
      <td>2002</td>
      <td>manual</td>
      <td>100</td>
      <td>golf</td>
      <td>150000</td>
      <td>6</td>
      <td>gasoline</td>
      <td>volkswagen</td>
      <td>NaN</td>
      <td>2016-03-20 00:00:00</td>
      <td>0</td>
      <td>40764</td>
      <td>2016-03-24 12:45:21</td>
    </tr>
  </tbody>
</table>
<p>354369 rows × 16 columns</p>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-2b062a32-0bfc-4172-8e1c-6a48886c398e')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/>
  </svg>
      </button>

  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-2b062a32-0bfc-4172-8e1c-6a48886c398e button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-2b062a32-0bfc-4172-8e1c-6a48886c398e');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>





```python
df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 354369 entries, 0 to 354368
    Data columns (total 16 columns):
     #   Column             Non-Null Count   Dtype 
    ---  ------             --------------   ----- 
     0   DateCrawled        354369 non-null  object
     1   Price              354369 non-null  int64 
     2   VehicleType        316879 non-null  object
     3   RegistrationYear   354369 non-null  int64 
     4   Gearbox            334536 non-null  object
     5   Power              354369 non-null  int64 
     6   Model              334664 non-null  object
     7   Kilometer          354369 non-null  int64 
     8   RegistrationMonth  354369 non-null  int64 
     9   FuelType           321474 non-null  object
     10  Brand              354369 non-null  object
     11  NotRepaired        283215 non-null  object
     12  DateCreated        354369 non-null  object
     13  NumberOfPictures   354369 non-null  int64 
     14  PostalCode         354369 non-null  int64 
     15  LastSeen           354369 non-null  object
    dtypes: int64(7), object(9)
    memory usage: 43.3+ MB
    


```python
df.isna().mean() * 100
```




    DateCrawled           0.000000
    Price                 0.000000
    VehicleType          10.579368
    RegistrationYear      0.000000
    Gearbox               5.596709
    Power                 0.000000
    Model                 5.560588
    Kilometer             0.000000
    RegistrationMonth     0.000000
    FuelType              9.282697
    Brand                 0.000000
    NotRepaired          20.079070
    DateCreated           0.000000
    NumberOfPictures      0.000000
    PostalCode            0.000000
    LastSeen              0.000000
    dtype: float64



### Вывод

**В результате предварительного анализа установлено:**

1. В столбце VehicleType (тип автомобильного кузова) - 10.6 % пропусков. Тип данных - object.
2. В столбце Gearbox (тип коробки передач) - 5.6 % пропусков. Тип данных - object.
3. В столбце Model (модель автомобиля) - 5.6 % пропусков. Тип данных - object.
4. В столбце FuelType (тип топлива) - 9.3 % пропусков. Тип данных - object.
5. В столбце NotRepaired (была машина в ремонте или нет) - 20.1 % пропусков. Тип данных - object.

### Поиск дубликатов


```python
df.duplicated().sum()
```




    4




```python
df = df.drop_duplicates().reset_index(drop=True) # удаление явных дубликатов (с удалением старых индексов и формированием новых)
```


```python
df.duplicated().sum() # проверка на отсутствие дубликатов
```




    0



### Поиск неявных дубликатов


```python
#переведем столбецы с датой в формат datetime64[ns]
df['DateCrawled'] = pd.to_datetime(df['DateCrawled'], format = '%Y-%m-%d')
df['DateCreated'] = pd.to_datetime(df['DateCreated'], format = '%Y-%m-%d')
df['LastSeen'] = pd.to_datetime(df['LastSeen'], format = '%Y-%m-%d')
```


```python
df['DateCrawled'].value_counts(ascending=False)
```




    2016-03-24 14:49:47    7
    2016-03-19 21:49:56    6
    2016-03-26 22:57:31    6
    2016-03-11 15:36:59    5
    2016-03-28 10:36:47    5
                          ..
    2016-03-13 23:39:11    1
    2016-03-20 16:48:06    1
    2016-03-22 21:51:04    1
    2016-03-11 16:25:36    1
    2016-03-19 18:57:12    1
    Name: DateCrawled, Length: 271174, dtype: int64




```python
df.query('DateCrawled == "2016-03-24 14:49:47"')
```





  <div id="df-52dfd02c-c1d9-4516-87ab-3d1b773aebac">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DateCrawled</th>
      <th>Price</th>
      <th>VehicleType</th>
      <th>RegistrationYear</th>
      <th>Gearbox</th>
      <th>Power</th>
      <th>Model</th>
      <th>Kilometer</th>
      <th>RegistrationMonth</th>
      <th>FuelType</th>
      <th>Brand</th>
      <th>NotRepaired</th>
      <th>DateCreated</th>
      <th>NumberOfPictures</th>
      <th>PostalCode</th>
      <th>LastSeen</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>33696</th>
      <td>2016-03-24 14:49:47</td>
      <td>3799</td>
      <td>sedan</td>
      <td>2002</td>
      <td>manual</td>
      <td>101</td>
      <td>a4</td>
      <td>150000</td>
      <td>10</td>
      <td>gasoline</td>
      <td>audi</td>
      <td>yes</td>
      <td>2016-03-24</td>
      <td>0</td>
      <td>72800</td>
      <td>2016-04-07 06:45:17</td>
    </tr>
    <tr>
      <th>41468</th>
      <td>2016-03-24 14:49:47</td>
      <td>990</td>
      <td>wagon</td>
      <td>2000</td>
      <td>manual</td>
      <td>0</td>
      <td>passat</td>
      <td>150000</td>
      <td>3</td>
      <td>gasoline</td>
      <td>volkswagen</td>
      <td>NaN</td>
      <td>2016-03-24</td>
      <td>0</td>
      <td>83646</td>
      <td>2016-04-01 23:41:53</td>
    </tr>
    <tr>
      <th>43209</th>
      <td>2016-03-24 14:49:47</td>
      <td>3000</td>
      <td>sedan</td>
      <td>2004</td>
      <td>manual</td>
      <td>116</td>
      <td>3er</td>
      <td>150000</td>
      <td>1</td>
      <td>gasoline</td>
      <td>bmw</td>
      <td>no</td>
      <td>2016-03-24</td>
      <td>0</td>
      <td>78467</td>
      <td>2016-04-07 06:45:18</td>
    </tr>
    <tr>
      <th>72521</th>
      <td>2016-03-24 14:49:47</td>
      <td>4800</td>
      <td>small</td>
      <td>1982</td>
      <td>manual</td>
      <td>34</td>
      <td>kaefer</td>
      <td>70000</td>
      <td>12</td>
      <td>petrol</td>
      <td>volkswagen</td>
      <td>no</td>
      <td>2016-03-24</td>
      <td>0</td>
      <td>14947</td>
      <td>2016-04-07 06:45:17</td>
    </tr>
    <tr>
      <th>131819</th>
      <td>2016-03-24 14:49:47</td>
      <td>850</td>
      <td>convertible</td>
      <td>1992</td>
      <td>manual</td>
      <td>198</td>
      <td>80</td>
      <td>150000</td>
      <td>5</td>
      <td>petrol</td>
      <td>audi</td>
      <td>yes</td>
      <td>2016-03-24</td>
      <td>0</td>
      <td>90443</td>
      <td>2016-03-30 16:15:57</td>
    </tr>
    <tr>
      <th>150172</th>
      <td>2016-03-24 14:49:47</td>
      <td>399</td>
      <td>small</td>
      <td>1999</td>
      <td>manual</td>
      <td>0</td>
      <td>NaN</td>
      <td>150000</td>
      <td>0</td>
      <td>petrol</td>
      <td>lancia</td>
      <td>yes</td>
      <td>2016-03-24</td>
      <td>0</td>
      <td>89231</td>
      <td>2016-04-07 06:45:19</td>
    </tr>
    <tr>
      <th>218109</th>
      <td>2016-03-24 14:49:47</td>
      <td>7500</td>
      <td>sedan</td>
      <td>2002</td>
      <td>auto</td>
      <td>309</td>
      <td>e_klasse</td>
      <td>150000</td>
      <td>11</td>
      <td>petrol</td>
      <td>mercedes_benz</td>
      <td>no</td>
      <td>2016-03-24</td>
      <td>0</td>
      <td>50321</td>
      <td>2016-03-27 11:44:58</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-52dfd02c-c1d9-4516-87ab-3d1b773aebac')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/>
  </svg>
      </button>

  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-52dfd02c-c1d9-4516-87ab-3d1b773aebac button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-52dfd02c-c1d9-4516-87ab-3d1b773aebac');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>





```python
df.query('DateCrawled == "2016-03-19 21:49:56"')
```





  <div id="df-1f42b4df-ede1-4549-a559-1ddcfeb82262">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DateCrawled</th>
      <th>Price</th>
      <th>VehicleType</th>
      <th>RegistrationYear</th>
      <th>Gearbox</th>
      <th>Power</th>
      <th>Model</th>
      <th>Kilometer</th>
      <th>RegistrationMonth</th>
      <th>FuelType</th>
      <th>Brand</th>
      <th>NotRepaired</th>
      <th>DateCreated</th>
      <th>NumberOfPictures</th>
      <th>PostalCode</th>
      <th>LastSeen</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>71023</th>
      <td>2016-03-19 21:49:56</td>
      <td>899</td>
      <td>small</td>
      <td>2001</td>
      <td>manual</td>
      <td>58</td>
      <td>agila</td>
      <td>150000</td>
      <td>6</td>
      <td>petrol</td>
      <td>opel</td>
      <td>no</td>
      <td>2016-03-19</td>
      <td>0</td>
      <td>55128</td>
      <td>2016-04-02 11:15:42</td>
    </tr>
    <tr>
      <th>107543</th>
      <td>2016-03-19 21:49:56</td>
      <td>8250</td>
      <td>wagon</td>
      <td>2005</td>
      <td>auto</td>
      <td>224</td>
      <td>a6</td>
      <td>150000</td>
      <td>10</td>
      <td>gasoline</td>
      <td>audi</td>
      <td>NaN</td>
      <td>2016-03-19</td>
      <td>0</td>
      <td>65929</td>
      <td>2016-04-04 08:45:52</td>
    </tr>
    <tr>
      <th>127851</th>
      <td>2016-03-19 21:49:56</td>
      <td>3299</td>
      <td>bus</td>
      <td>2002</td>
      <td>manual</td>
      <td>116</td>
      <td>other</td>
      <td>125000</td>
      <td>11</td>
      <td>petrol</td>
      <td>citroen</td>
      <td>no</td>
      <td>2016-03-19</td>
      <td>0</td>
      <td>52249</td>
      <td>2016-03-23 11:45:08</td>
    </tr>
    <tr>
      <th>146089</th>
      <td>2016-03-19 21:49:56</td>
      <td>3650</td>
      <td>NaN</td>
      <td>2017</td>
      <td>manual</td>
      <td>77</td>
      <td>transporter</td>
      <td>20000</td>
      <td>0</td>
      <td>gasoline</td>
      <td>volkswagen</td>
      <td>NaN</td>
      <td>2016-03-19</td>
      <td>0</td>
      <td>35713</td>
      <td>2016-03-25 09:47:36</td>
    </tr>
    <tr>
      <th>192092</th>
      <td>2016-03-19 21:49:56</td>
      <td>700</td>
      <td>small</td>
      <td>1999</td>
      <td>manual</td>
      <td>54</td>
      <td>corsa</td>
      <td>125000</td>
      <td>0</td>
      <td>petrol</td>
      <td>opel</td>
      <td>NaN</td>
      <td>2016-03-19</td>
      <td>0</td>
      <td>35683</td>
      <td>2016-03-24 18:15:38</td>
    </tr>
    <tr>
      <th>299887</th>
      <td>2016-03-19 21:49:56</td>
      <td>3100</td>
      <td>small</td>
      <td>2008</td>
      <td>manual</td>
      <td>86</td>
      <td>ibiza</td>
      <td>150000</td>
      <td>4</td>
      <td>petrol</td>
      <td>seat</td>
      <td>no</td>
      <td>2016-03-19</td>
      <td>0</td>
      <td>97837</td>
      <td>2016-03-19 22:43:16</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-1f42b4df-ede1-4549-a559-1ddcfeb82262')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/>
  </svg>
      </button>

  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-1f42b4df-ede1-4549-a559-1ddcfeb82262 button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-1f42b4df-ede1-4549-a559-1ddcfeb82262');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>





```python
df.query('DateCrawled == "2016-03-26 22:57:31"')
```





  <div id="df-3d3b92d3-9162-4bc3-aa11-7e37e5781cc9">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DateCrawled</th>
      <th>Price</th>
      <th>VehicleType</th>
      <th>RegistrationYear</th>
      <th>Gearbox</th>
      <th>Power</th>
      <th>Model</th>
      <th>Kilometer</th>
      <th>RegistrationMonth</th>
      <th>FuelType</th>
      <th>Brand</th>
      <th>NotRepaired</th>
      <th>DateCreated</th>
      <th>NumberOfPictures</th>
      <th>PostalCode</th>
      <th>LastSeen</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>67475</th>
      <td>2016-03-26 22:57:31</td>
      <td>13000</td>
      <td>small</td>
      <td>2010</td>
      <td>auto</td>
      <td>105</td>
      <td>polo</td>
      <td>20000</td>
      <td>12</td>
      <td>petrol</td>
      <td>volkswagen</td>
      <td>no</td>
      <td>2016-03-26</td>
      <td>0</td>
      <td>91207</td>
      <td>2016-04-07 02:46:52</td>
    </tr>
    <tr>
      <th>71500</th>
      <td>2016-03-26 22:57:31</td>
      <td>4150</td>
      <td>sedan</td>
      <td>1997</td>
      <td>auto</td>
      <td>179</td>
      <td>NaN</td>
      <td>150000</td>
      <td>10</td>
      <td>petrol</td>
      <td>audi</td>
      <td>no</td>
      <td>2016-03-26</td>
      <td>0</td>
      <td>9128</td>
      <td>2016-04-01 05:47:34</td>
    </tr>
    <tr>
      <th>96762</th>
      <td>2016-03-26 22:57:31</td>
      <td>600</td>
      <td>NaN</td>
      <td>2000</td>
      <td>NaN</td>
      <td>90</td>
      <td>bravo</td>
      <td>150000</td>
      <td>0</td>
      <td>NaN</td>
      <td>fiat</td>
      <td>NaN</td>
      <td>2016-03-26</td>
      <td>0</td>
      <td>59964</td>
      <td>2016-03-27 08:41:12</td>
    </tr>
    <tr>
      <th>206202</th>
      <td>2016-03-26 22:57:31</td>
      <td>375</td>
      <td>NaN</td>
      <td>2017</td>
      <td>manual</td>
      <td>0</td>
      <td>3er</td>
      <td>150000</td>
      <td>0</td>
      <td>petrol</td>
      <td>bmw</td>
      <td>NaN</td>
      <td>2016-03-26</td>
      <td>0</td>
      <td>71636</td>
      <td>2016-03-30 12:18:14</td>
    </tr>
    <tr>
      <th>280872</th>
      <td>2016-03-26 22:57:31</td>
      <td>11499</td>
      <td>sedan</td>
      <td>2009</td>
      <td>manual</td>
      <td>204</td>
      <td>1er</td>
      <td>125000</td>
      <td>6</td>
      <td>gasoline</td>
      <td>bmw</td>
      <td>no</td>
      <td>2016-03-26</td>
      <td>0</td>
      <td>36272</td>
      <td>2016-04-02 16:15:57</td>
    </tr>
    <tr>
      <th>282968</th>
      <td>2016-03-26 22:57:31</td>
      <td>11500</td>
      <td>convertible</td>
      <td>2008</td>
      <td>manual</td>
      <td>116</td>
      <td>cooper</td>
      <td>50000</td>
      <td>5</td>
      <td>petrol</td>
      <td>mini</td>
      <td>no</td>
      <td>2016-03-26</td>
      <td>0</td>
      <td>88048</td>
      <td>2016-04-07 02:46:54</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-3d3b92d3-9162-4bc3-aa11-7e37e5781cc9')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/>
  </svg>
      </button>

  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-3d3b92d3-9162-4bc3-aa11-7e37e5781cc9 button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-3d3b92d3-9162-4bc3-aa11-7e37e5781cc9');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>





```python
df.query('DateCrawled == "2016-03-11 15:36:59"')
```





  <div id="df-7dc35f18-0bd7-4864-9a4e-fba405755110">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DateCrawled</th>
      <th>Price</th>
      <th>VehicleType</th>
      <th>RegistrationYear</th>
      <th>Gearbox</th>
      <th>Power</th>
      <th>Model</th>
      <th>Kilometer</th>
      <th>RegistrationMonth</th>
      <th>FuelType</th>
      <th>Brand</th>
      <th>NotRepaired</th>
      <th>DateCreated</th>
      <th>NumberOfPictures</th>
      <th>PostalCode</th>
      <th>LastSeen</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>48628</th>
      <td>2016-03-11 15:36:59</td>
      <td>2800</td>
      <td>sedan</td>
      <td>2000</td>
      <td>manual</td>
      <td>209</td>
      <td>other</td>
      <td>150000</td>
      <td>4</td>
      <td>petrol</td>
      <td>audi</td>
      <td>no</td>
      <td>2016-03-11</td>
      <td>0</td>
      <td>71067</td>
      <td>2016-03-17 01:44:35</td>
    </tr>
    <tr>
      <th>113135</th>
      <td>2016-03-11 15:36:59</td>
      <td>0</td>
      <td>wagon</td>
      <td>1997</td>
      <td>manual</td>
      <td>125</td>
      <td>a4</td>
      <td>150000</td>
      <td>0</td>
      <td>petrol</td>
      <td>audi</td>
      <td>yes</td>
      <td>2016-03-11</td>
      <td>0</td>
      <td>87730</td>
      <td>2016-04-05 11:46:38</td>
    </tr>
    <tr>
      <th>196075</th>
      <td>2016-03-11 15:36:59</td>
      <td>600</td>
      <td>NaN</td>
      <td>2016</td>
      <td>NaN</td>
      <td>75</td>
      <td>golf</td>
      <td>150000</td>
      <td>8</td>
      <td>NaN</td>
      <td>volkswagen</td>
      <td>NaN</td>
      <td>2016-03-11</td>
      <td>0</td>
      <td>45888</td>
      <td>2016-03-17 00:15:46</td>
    </tr>
    <tr>
      <th>284579</th>
      <td>2016-03-11 15:36:59</td>
      <td>2600</td>
      <td>convertible</td>
      <td>2001</td>
      <td>auto</td>
      <td>109</td>
      <td>2_reihe</td>
      <td>125000</td>
      <td>8</td>
      <td>petrol</td>
      <td>peugeot</td>
      <td>no</td>
      <td>2016-03-11</td>
      <td>0</td>
      <td>67071</td>
      <td>2016-03-18 00:18:02</td>
    </tr>
    <tr>
      <th>331423</th>
      <td>2016-03-11 15:36:59</td>
      <td>150</td>
      <td>small</td>
      <td>1993</td>
      <td>manual</td>
      <td>50</td>
      <td>corsa</td>
      <td>150000</td>
      <td>3</td>
      <td>petrol</td>
      <td>opel</td>
      <td>NaN</td>
      <td>2016-03-11</td>
      <td>0</td>
      <td>12099</td>
      <td>2016-03-11 16:42:14</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-7dc35f18-0bd7-4864-9a4e-fba405755110')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/>
  </svg>
      </button>

  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-7dc35f18-0bd7-4864-9a4e-fba405755110 button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-7dc35f18-0bd7-4864-9a4e-fba405755110');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>





```python
df.query('DateCrawled == "2016-03-28 10:36:47"') 
```





  <div id="df-997110b8-23a4-4c87-9cb9-5234d58d0763">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DateCrawled</th>
      <th>Price</th>
      <th>VehicleType</th>
      <th>RegistrationYear</th>
      <th>Gearbox</th>
      <th>Power</th>
      <th>Model</th>
      <th>Kilometer</th>
      <th>RegistrationMonth</th>
      <th>FuelType</th>
      <th>Brand</th>
      <th>NotRepaired</th>
      <th>DateCreated</th>
      <th>NumberOfPictures</th>
      <th>PostalCode</th>
      <th>LastSeen</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>30031</th>
      <td>2016-03-28 10:36:47</td>
      <td>1200</td>
      <td>NaN</td>
      <td>2017</td>
      <td>manual</td>
      <td>75</td>
      <td>kadett</td>
      <td>150000</td>
      <td>8</td>
      <td>petrol</td>
      <td>opel</td>
      <td>NaN</td>
      <td>2016-03-28</td>
      <td>0</td>
      <td>93155</td>
      <td>2016-04-06 11:46:51</td>
    </tr>
    <tr>
      <th>50486</th>
      <td>2016-03-28 10:36:47</td>
      <td>18800</td>
      <td>wagon</td>
      <td>2011</td>
      <td>auto</td>
      <td>170</td>
      <td>e_klasse</td>
      <td>150000</td>
      <td>6</td>
      <td>gasoline</td>
      <td>mercedes_benz</td>
      <td>no</td>
      <td>2016-03-28</td>
      <td>0</td>
      <td>1326</td>
      <td>2016-04-06 11:46:51</td>
    </tr>
    <tr>
      <th>86793</th>
      <td>2016-03-28 10:36:47</td>
      <td>800</td>
      <td>sedan</td>
      <td>1998</td>
      <td>manual</td>
      <td>125</td>
      <td>a3</td>
      <td>150000</td>
      <td>2</td>
      <td>petrol</td>
      <td>audi</td>
      <td>no</td>
      <td>2016-03-28</td>
      <td>0</td>
      <td>26721</td>
      <td>2016-04-06 11:46:52</td>
    </tr>
    <tr>
      <th>187818</th>
      <td>2016-03-28 10:36:47</td>
      <td>1050</td>
      <td>wagon</td>
      <td>1998</td>
      <td>auto</td>
      <td>101</td>
      <td>vectra</td>
      <td>150000</td>
      <td>5</td>
      <td>petrol</td>
      <td>opel</td>
      <td>no</td>
      <td>2016-03-28</td>
      <td>0</td>
      <td>67365</td>
      <td>2016-04-06 13:44:51</td>
    </tr>
    <tr>
      <th>190182</th>
      <td>2016-03-28 10:36:47</td>
      <td>1300</td>
      <td>sedan</td>
      <td>1998</td>
      <td>manual</td>
      <td>0</td>
      <td>octavia</td>
      <td>150000</td>
      <td>1</td>
      <td>petrol</td>
      <td>skoda</td>
      <td>NaN</td>
      <td>2016-03-28</td>
      <td>0</td>
      <td>27755</td>
      <td>2016-04-02 15:15:31</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-997110b8-23a4-4c87-9cb9-5234d58d0763')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/>
  </svg>
      </button>

  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-997110b8-23a4-4c87-9cb9-5234d58d0763 button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-997110b8-23a4-4c87-9cb9-5234d58d0763');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>




### Вывод

Среди первых пяти потенциальных неявных дубликатов в списке (df['DateCrawled'].value_counts(ascending=False)) - неявные дубликаты не обнаружены.

### Просмотр описательной статистики и поиск аномалий


```python
df.describe()
```





  <div id="df-78322f0b-c5a9-4aff-a4ec-cd7dcc5cfec0">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Price</th>
      <th>RegistrationYear</th>
      <th>Power</th>
      <th>Kilometer</th>
      <th>RegistrationMonth</th>
      <th>NumberOfPictures</th>
      <th>PostalCode</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>354365.000000</td>
      <td>354365.000000</td>
      <td>354365.000000</td>
      <td>354365.000000</td>
      <td>354365.000000</td>
      <td>354365.0</td>
      <td>354365.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>4416.679830</td>
      <td>2004.234481</td>
      <td>110.093816</td>
      <td>128211.363989</td>
      <td>5.714650</td>
      <td>0.0</td>
      <td>50508.503800</td>
    </tr>
    <tr>
      <th>std</th>
      <td>4514.176349</td>
      <td>90.228466</td>
      <td>189.851330</td>
      <td>37905.083858</td>
      <td>3.726432</td>
      <td>0.0</td>
      <td>25783.100078</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>1000.000000</td>
      <td>0.000000</td>
      <td>5000.000000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>1067.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>1050.000000</td>
      <td>1999.000000</td>
      <td>69.000000</td>
      <td>125000.000000</td>
      <td>3.000000</td>
      <td>0.0</td>
      <td>30165.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>2700.000000</td>
      <td>2003.000000</td>
      <td>105.000000</td>
      <td>150000.000000</td>
      <td>6.000000</td>
      <td>0.0</td>
      <td>49413.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>6400.000000</td>
      <td>2008.000000</td>
      <td>143.000000</td>
      <td>150000.000000</td>
      <td>9.000000</td>
      <td>0.0</td>
      <td>71083.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>20000.000000</td>
      <td>9999.000000</td>
      <td>20000.000000</td>
      <td>150000.000000</td>
      <td>12.000000</td>
      <td>0.0</td>
      <td>99998.000000</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-78322f0b-c5a9-4aff-a4ec-cd7dcc5cfec0')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/>
  </svg>
      </button>

  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-78322f0b-c5a9-4aff-a4ec-cd7dcc5cfec0 button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-78322f0b-c5a9-4aff-a4ec-cd7dcc5cfec0');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>





```python
df['RegistrationYear'].value_counts(ascending=False)
```




    2000    24490
    1999    22727
    2005    22109
    2001    20123
    2006    19900
            ...  
    6500        1
    2290        1
    1001        1
    9450        1
    3500        1
    Name: RegistrationYear, Length: 151, dtype: int64




```python
df['RegistrationYear'].sort_values().unique()
```




    array([1000, 1001, 1039, 1111, 1200, 1234, 1253, 1255, 1300, 1400, 1500,
           1600, 1602, 1688, 1800, 1910, 1915, 1919, 1920, 1923, 1925, 1927,
           1928, 1929, 1930, 1931, 1932, 1933, 1934, 1935, 1936, 1937, 1938,
           1940, 1941, 1942, 1943, 1944, 1945, 1946, 1947, 1948, 1949, 1950,
           1951, 1952, 1953, 1954, 1955, 1956, 1957, 1958, 1959, 1960, 1961,
           1962, 1963, 1964, 1965, 1966, 1967, 1968, 1969, 1970, 1971, 1972,
           1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983,
           1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994,
           1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005,
           2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016,
           2017, 2018, 2019, 2066, 2200, 2222, 2290, 2500, 2800, 2900, 3000,
           3200, 3500, 3700, 3800, 4000, 4100, 4500, 4800, 5000, 5300, 5555,
           5600, 5900, 5911, 6000, 6500, 7000, 7100, 7500, 7800, 8000, 8200,
           8455, 8500, 8888, 9000, 9229, 9450, 9996, 9999])




```python
bag_RegistrationYear = df.query('RegistrationYear == [1000, 1001, 1039, 1111, 1200, 1234, 1253, 1255, 1300, 1400, 1500, 1600, 1602, 1688, 1800, 2017, 2018, 2019, 2066, 2200, 2222, 2290, 2500, 2800, 2900, 3000, 3200, 3500, 3700, 3800, 4000, 4100, 4500, 4800, 5000, 5300, 5555, 5600, 5900, 5911, 6000, 6500, 7000, 7100, 7500, 7800, 8000, 8200, 8455, 8500, 8888, 9000, 9229, 9450, 9996, 9999]')
```


```python
len(bag_RegistrationYear)
```




    14596




```python
len(bag_RegistrationYear) / len(df) * 100
```




    4.118916935927645



Аномальных данных с не корректным годом порядка 4 %

Так как год регистрации автомобиля вряд ли был в позапрошлом тысячелетии, а также не может быть после даты скачивания анкеты из базы, то целесообразно убрать данные не входящие в промежутком с 1900 по 2016.


```python
df['Power'].sort_values().unique()
```




    array([    0,     1,     2,     3,     4,     5,     6,     7,     8,
               9,    10,    11,    12,    13,    14,    15,    16,    17,
              18,    19,    20,    21,    22,    23,    24,    25,    26,
              27,    28,    29,    30,    31,    32,    33,    34,    35,
              36,    37,    38,    39,    40,    41,    42,    43,    44,
              45,    46,    47,    48,    49,    50,    51,    52,    53,
              54,    55,    56,    57,    58,    59,    60,    61,    62,
              63,    64,    65,    66,    67,    68,    69,    70,    71,
              72,    73,    74,    75,    76,    77,    78,    79,    80,
              81,    82,    83,    84,    85,    86,    87,    88,    89,
              90,    91,    92,    93,    94,    95,    96,    97,    98,
              99,   100,   101,   102,   103,   104,   105,   106,   107,
             108,   109,   110,   111,   112,   113,   114,   115,   116,
             117,   118,   119,   120,   121,   122,   123,   124,   125,
             126,   127,   128,   129,   130,   131,   132,   133,   134,
             135,   136,   137,   138,   139,   140,   141,   142,   143,
             144,   145,   146,   147,   148,   149,   150,   151,   152,
             153,   154,   155,   156,   157,   158,   159,   160,   161,
             162,   163,   164,   165,   166,   167,   168,   169,   170,
             171,   172,   173,   174,   175,   176,   177,   178,   179,
             180,   181,   182,   183,   184,   185,   186,   187,   188,
             189,   190,   191,   192,   193,   194,   195,   196,   197,
             198,   199,   200,   201,   202,   203,   204,   205,   206,
             207,   208,   209,   210,   211,   212,   213,   214,   215,
             216,   217,   218,   219,   220,   221,   222,   223,   224,
             225,   226,   227,   228,   229,   230,   231,   232,   233,
             234,   235,   236,   237,   238,   239,   240,   241,   242,
             243,   244,   245,   246,   247,   248,   249,   250,   251,
             252,   253,   254,   255,   256,   257,   258,   259,   260,
             261,   262,   264,   265,   266,   267,   268,   269,   270,
             271,   272,   273,   274,   275,   276,   277,   278,   279,
             280,   281,   282,   283,   284,   285,   286,   287,   288,
             289,   290,   292,   293,   294,   295,   296,   297,   298,
             299,   300,   301,   303,   304,   305,   306,   307,   308,
             309,   310,   311,   313,   314,   315,   316,   317,   318,
             320,   321,   322,   323,   324,   325,   326,   327,   328,
             329,   330,   331,   332,   333,   334,   335,   336,   337,
             338,   339,   340,   341,   343,   344,   345,   346,   347,
             348,   349,   350,   351,   352,   353,   354,   355,   356,
             357,   358,   360,   361,   362,   363,   364,   365,   367,
             368,   370,   371,   374,   375,   376,   377,   379,   380,
             381,   382,   385,   386,   387,   388,   390,   392,   394,
             396,   398,   399,   400,   401,   402,   405,   408,   409,
             411,   416,   420,   421,   425,   426,   428,   430,   431,
             435,   440,   442,   445,   449,   450,   454,   457,   459,
             460,   475,   476,   485,   487,   489,   490,   500,   504,
             505,   507,   508,   510,   514,   515,   517,   519,   520,
             521,   525,   530,   540,   541,   544,   550,   551,   553,
             560,   572,   574,   579,   580,   584,   585,   599,   600,
             601,   602,   603,   604,   606,   607,   610,   612,   620,
             640,   645,   650,   651,   671,   678,   682,   685,   696,
             700,   702,   703,   732,   743,   750,   751,   754,   771,
             776,   800,   805,   808,   850,   851,   871,   900,   901,
             902,   903,   907,   909,   923,   950,   952,   953,   960,
             998,   999,  1000,  1001,  1002,  1003,  1004,  1005,  1011,
            1012,  1016,  1017,  1021,  1024,  1054,  1055,  1056,  1062,
            1079,  1082,  1090,  1100,  1102,  1103,  1105,  1111,  1115,
            1120,  1149,  1151,  1158,  1160,  1162,  1164,  1199,  1200,
            1202,  1221,  1223,  1230,  1239,  1240,  1241,  1250,  1252,
            1256,  1275,  1288,  1299,  1300,  1312,  1317,  1324,  1339,
            1351,  1360,  1362,  1363,  1367,  1390,  1394,  1398,  1399,
            1400,  1401,  1403,  1405,  1416,  1432,  1433,  1436,  1500,
            1501,  1502,  1503,  1506,  1521,  1548,  1595,  1596,  1597,
            1598,  1600,  1625,  1631,  1653,  1659,  1689,  1700,  1701,
            1703,  1704,  1707,  1753,  1771,  1779,  1780,  1781,  1783,
            1793,  1796,  1799,  1800,  1801,  1870,  1895,  1896,  1900,
            1910,  1920,  1922,  1933,  1937,  1968,  1986,  1988,  1992,
            1993,  1995,  1998,  1999,  2000,  2004,  2005,  2007,  2009,
            2016,  2017,  2018,  2172,  2200,  2201,  2331,  2340,  2389,
            2402,  2461,  2598,  2729,  2789,  2792,  2799,  3000,  3199,
            3454,  3500,  3750,  4400,  4507,  4700,  5000,  5411,  5420,
            5575,  5809,  5815,  5867,  6006,  6010,  6011,  6012,  6018,
            6045,  6062,  6226,  6512,  6920,  7508,  7511,  7512,  7515,
            7518,  7529,  7544,  8011,  8259,  8404,  8500,  9000,  9007,
            9010,  9011,  9012,  9013,  9710, 10000, 10110, 10218, 10311,
           10317, 10520, 10522, 10710, 10910, 10912, 11011, 11025, 11111,
           11509, 11530, 11635, 12012, 12510, 12512, 12684, 13616, 13636,
           14009, 15001, 15016, 15017, 15020, 15033, 16011, 16051, 16311,
           16312, 17011, 17019, 17410, 17700, 17932, 19208, 19211, 19312,
           20000])



Минимальная мощность автомобиля исходя из источника (https://avtika.ru/kakoy-minimalnyy-obem-dvigatelya-avtomobilya/) составляет порядка 52 л.с., а максимальная (https://rating-avto.ru/raznoe/samyie-moshhnyie-avtomobilnyie-dvigateli.html#:~:text=Bugatti%208.0%20W16&text=%D0%9C%D0%BE%D1%89%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%D1%82%D0%B0%D0%BA%D0%BE%D0%B3%D0%BE%20%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%BE%D0%B1%D0%B8%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE%20%D0%BC%D0%BE%D1%82%D0%BE%D1%80%D0%B0%20%D0%B4%D0%BE%D1%81%D1%82%D0%B8%D0%B3%D0%B0%D0%B5%D1%82,%D0%BE%D1%82%D0%BB%D0%B8%D1%87%D0%B0%D0%B5%D1%82%D1%81%D1%8F%20%D0%BD%D0%B5%D0%B2%D0%B5%D1%80%D0%BE%D1%8F%D1%82%D0%BD%D0%BE%20%D0%B1%D0%BE%D0%BB%D1%8C%D1%88%D0%B8%D0%BC%20%D1%80%D0%B0%D1%81%D1%85%D0%BE%D0%B4%D0%BE%D0%BC%20%D1%82%D0%BE%D0%BF%D0%BB%D0%B8%D0%B2%D0%B0) порядка 1500 л.с.


```python
b = np.array([    0,     1,     2,     3,     4,     5,     6,     7,     8,
           9,    10,    11,    12,    13,    14,    15,    16,    17,
          18,    19,    20,    21,    22,    23,    24,    25,    26,
          27,    28,    29,    30,    31,    32,    33,    34,    35,
          36,    37,    38,    39,    40,    41,    42,    43,    44,
          45,    46,    47,    48,    49,    50,    51,  1501,  1502,  1503,  1506,  1521,  1548,  1595,  1596,  1597,
        1598,  1600,  1625,  1631,  1653,  1659,  1689,  1700,  1701,
        1703,  1704,  1707,  1753,  1771,  1779,  1780,  1781,  1783,
        1793,  1796,  1799,  1800,  1801,  1870,  1895,  1896,  1900,
        1910,  1920,  1922,  1933,  1937,  1968,  1986,  1988,  1992,
        1993,  1995,  1998,  1999,  2000,  2004,  2005,  2007,  2009,
        2016,  2017,  2018,  2172,  2200,  2201,  2331,  2340,  2389,
        2402,  2461,  2598,  2729,  2789,  2792,  2799,  3000,  3199,
        3454,  3500,  3750,  4400,  4507,  4700,  5000,  5411,  5420,
        5575,  5809,  5815,  5867,  6006,  6010,  6011,  6012,  6018,
        6045,  6062,  6226,  6512,  6920,  7508,  7511,  7512,  7515,
        7518,  7529,  7544,  8011,  8259,  8404,  8500,  9000,  9007,
        9010,  9011,  9012,  9013,  9710, 10000, 10110, 10218, 10311,
       10317, 10520, 10522, 10710, 10910, 10912, 11011, 11025, 11111,
       11509, 11530, 11635, 12012, 12510, 12512, 12684, 13616, 13636,
       14009, 15001, 15016, 15017, 15020, 15033, 16011, 16051, 16311,
       16312, 17011, 17019, 17410, 17700, 17932, 19208, 19211, 19312,
       20000])
```


```python
bag_Power_count = 0
for i in range(len(df)):
  if df['Power'][i] in b:
    bag_Power_count = bag_Power_count + 1

```


```python
bag_Power_count
```




    51095




```python
bag_Power_count / len(df) * 100 
```




    14.418749029954988



Аномальных данных с не корректный мощностью порядка 14 %


```python
df['Price'].value_counts(ascending=False)
```




    0        10772
    500       5670
    1500      5394
    1000      4648
    1200      4594
             ...  
    1368         1
    233          1
    11080        1
    16340        1
    10985        1
    Name: Price, Length: 3731, dtype: int64




```python
bag_Price_count = 10772
```


```python
bag_Price_count / len(df) * 100
```




    3.0398035923412303



## Вывод

**В результате подготовки данных установлено:**

1. В столбце VehicleType (тип автомобильного кузова) - 10.6 % пропусков. Тип данных - object.
2. В столбце Gearbox (тип коробки передач) - 5.6 % пропусков. Тип данных - object.
3. В столбце Model (модель автомобиля) - 5.6 % пропусков. Тип данных - object.
4. В столбце FuelType (тип топлива) - 9.3 % пропусков. Тип данных - object.
5. В столбце NotRepaired (была машина в ремонте или нет) - 20.1 % пропусков. Тип данных - object.
6. Среди первых пяти потенциальных неявных дубликатов в списке (df['DateCrawled'].value_counts(ascending=False)) - неявные дубликаты не обнаружены.
7. Тип данных либо 'int', либо 'object'.
8. Аномальных данных в столбце 'RegistrationYear' порядка 4 %.
9. Аномальных данных в столбце 'Power' порядка 14 %.
10. Также имеется не значительное количество аномальных данных в столбце 'Price'.

### Устранение аномалий и пропусков


```python
df.isna().mean() * 100
```




    DateCrawled           0.000000
    Price                 0.000000
    VehicleType          10.579487
    RegistrationYear      0.000000
    Gearbox               5.596772
    Power                 0.000000
    Model                 5.560651
    Kilometer             0.000000
    RegistrationMonth     0.000000
    FuelType              9.282802
    Brand                 0.000000
    NotRepaired          20.079297
    DateCreated           0.000000
    NumberOfPictures      0.000000
    PostalCode            0.000000
    LastSeen              0.000000
    dtype: float64



Процент не корректных данных очень большой (аномалий и пропусков). Такие данные хотелось бы вернуть тому, кто их предоставил, НО МЫ ЛЮБИМ DS И БУДЕМ РАБОТАТЬ С ТЕМ, ЧТО ИМЕЕТСЯ!!!  В целом, данных достаточно много (354369) и основная задача создать модель, которая будет точно предсказывать стоимость (значение метрики RMSE должно быть меньше 2500). Обучающие данные должны быть максимально приближены к реальным, однако, при заполнении пропусков средними или медианными значениями это может привести к недостаточно точной работе модели, плюс наличие большого количества аномалий также пагубно скажется на качестве модели. Устранение пропусков и аномалий через удаление - это то, что не повлияет на истинность оставшихся значений по которым будет обучаться модель. Попробуем пойти именно по этому пути и, если удастся достичь значения метрики RMSE меньше 2500 - будем считать, что примененный способ борьбы с пропусками и аномалиями уместен.


```python
for i in range(len(df)):
  if df['Power'][i] in b:
    df['Power'][i] = np.NaN
```


```python
for j in range(len(df)):
  if df['Price'][j] < 1:
    df['Price'][j] = np.NaN
```


```python
df = df.query('RegistrationYear != [1000, 1001, 1039, 1111, 1200, 1234, 1253, 1255, 1300, 1400, 1500, 1600, 1602, 1688, 1800, 2017, 2018, 2019, 2066, 2200, 2222, 2290, 2500, 2800, 2900, 3000, 3200, 3500, 3700, 3800, 4000, 4100, 4500, 4800, 5000, 5300, 5555, 5600, 5900, 5911, 6000, 6500, 7000, 7100, 7500, 7800, 8000, 8200, 8455, 8500, 8888, 9000, 9229, 9450, 9996, 9999]')
```


```python
df
```





  <div id="df-fe24fb18-3dc2-4efd-836a-859125ec41e1">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DateCrawled</th>
      <th>Price</th>
      <th>VehicleType</th>
      <th>RegistrationYear</th>
      <th>Gearbox</th>
      <th>Power</th>
      <th>Model</th>
      <th>Kilometer</th>
      <th>RegistrationMonth</th>
      <th>FuelType</th>
      <th>Brand</th>
      <th>NotRepaired</th>
      <th>DateCreated</th>
      <th>NumberOfPictures</th>
      <th>PostalCode</th>
      <th>LastSeen</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2016-03-24 11:52:17</td>
      <td>480.0</td>
      <td>NaN</td>
      <td>1993</td>
      <td>manual</td>
      <td>NaN</td>
      <td>golf</td>
      <td>150000</td>
      <td>0</td>
      <td>petrol</td>
      <td>volkswagen</td>
      <td>NaN</td>
      <td>2016-03-24</td>
      <td>0</td>
      <td>70435</td>
      <td>2016-04-07 03:16:57</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2016-03-24 10:58:45</td>
      <td>18300.0</td>
      <td>coupe</td>
      <td>2011</td>
      <td>manual</td>
      <td>190.0</td>
      <td>NaN</td>
      <td>125000</td>
      <td>5</td>
      <td>gasoline</td>
      <td>audi</td>
      <td>yes</td>
      <td>2016-03-24</td>
      <td>0</td>
      <td>66954</td>
      <td>2016-04-07 01:46:50</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2016-03-14 12:52:21</td>
      <td>9800.0</td>
      <td>suv</td>
      <td>2004</td>
      <td>auto</td>
      <td>163.0</td>
      <td>grand</td>
      <td>125000</td>
      <td>8</td>
      <td>gasoline</td>
      <td>jeep</td>
      <td>NaN</td>
      <td>2016-03-14</td>
      <td>0</td>
      <td>90480</td>
      <td>2016-04-05 12:47:46</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2016-03-17 16:54:04</td>
      <td>1500.0</td>
      <td>small</td>
      <td>2001</td>
      <td>manual</td>
      <td>75.0</td>
      <td>golf</td>
      <td>150000</td>
      <td>6</td>
      <td>petrol</td>
      <td>volkswagen</td>
      <td>no</td>
      <td>2016-03-17</td>
      <td>0</td>
      <td>91074</td>
      <td>2016-03-17 17:40:17</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2016-03-31 17:25:20</td>
      <td>3600.0</td>
      <td>small</td>
      <td>2008</td>
      <td>manual</td>
      <td>69.0</td>
      <td>fabia</td>
      <td>90000</td>
      <td>7</td>
      <td>gasoline</td>
      <td>skoda</td>
      <td>no</td>
      <td>2016-03-31</td>
      <td>0</td>
      <td>60437</td>
      <td>2016-04-06 10:17:21</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>354360</th>
      <td>2016-03-21 09:50:58</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2005</td>
      <td>manual</td>
      <td>NaN</td>
      <td>colt</td>
      <td>150000</td>
      <td>7</td>
      <td>petrol</td>
      <td>mitsubishi</td>
      <td>yes</td>
      <td>2016-03-21</td>
      <td>0</td>
      <td>2694</td>
      <td>2016-03-21 10:42:49</td>
    </tr>
    <tr>
      <th>354361</th>
      <td>2016-03-14 17:48:27</td>
      <td>2200.0</td>
      <td>NaN</td>
      <td>2005</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>20000</td>
      <td>1</td>
      <td>NaN</td>
      <td>sonstige_autos</td>
      <td>NaN</td>
      <td>2016-03-14</td>
      <td>0</td>
      <td>39576</td>
      <td>2016-04-06 00:46:52</td>
    </tr>
    <tr>
      <th>354362</th>
      <td>2016-03-05 19:56:21</td>
      <td>1199.0</td>
      <td>convertible</td>
      <td>2000</td>
      <td>auto</td>
      <td>101.0</td>
      <td>fortwo</td>
      <td>125000</td>
      <td>3</td>
      <td>petrol</td>
      <td>smart</td>
      <td>no</td>
      <td>2016-03-05</td>
      <td>0</td>
      <td>26135</td>
      <td>2016-03-11 18:17:12</td>
    </tr>
    <tr>
      <th>354363</th>
      <td>2016-03-19 18:57:12</td>
      <td>9200.0</td>
      <td>bus</td>
      <td>1996</td>
      <td>manual</td>
      <td>102.0</td>
      <td>transporter</td>
      <td>150000</td>
      <td>3</td>
      <td>gasoline</td>
      <td>volkswagen</td>
      <td>no</td>
      <td>2016-03-19</td>
      <td>0</td>
      <td>87439</td>
      <td>2016-04-07 07:15:26</td>
    </tr>
    <tr>
      <th>354364</th>
      <td>2016-03-20 19:41:08</td>
      <td>3400.0</td>
      <td>wagon</td>
      <td>2002</td>
      <td>manual</td>
      <td>100.0</td>
      <td>golf</td>
      <td>150000</td>
      <td>6</td>
      <td>gasoline</td>
      <td>volkswagen</td>
      <td>NaN</td>
      <td>2016-03-20</td>
      <td>0</td>
      <td>40764</td>
      <td>2016-03-24 12:45:21</td>
    </tr>
  </tbody>
</table>
<p>339769 rows × 16 columns</p>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-fe24fb18-3dc2-4efd-836a-859125ec41e1')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/>
  </svg>
      </button>

  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-fe24fb18-3dc2-4efd-836a-859125ec41e1 button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-fe24fb18-3dc2-4efd-836a-859125ec41e1');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>





```python
df = df.dropna()
df = df.reset_index(drop=True)
```

### Разделение выборки на тестовую, тренировочную и валидационную, а также масштабирование и кодирование


```python
features_dumm = df.drop(columns=['DateCrawled', 'Price', 'DateCreated', 'LastSeen'])
features_Ord = df.drop(columns=['DateCrawled', 'Price', 'DateCreated', 'LastSeen'])
```


```python
target_dumm = df['Price']
target_Ord = df['Price']
```


```python
features_dumm
```





  <div id="df-9f410d3c-1cc5-4a1c-9c28-ad1f36189c93">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>VehicleType</th>
      <th>RegistrationYear</th>
      <th>Gearbox</th>
      <th>Power</th>
      <th>Model</th>
      <th>Kilometer</th>
      <th>RegistrationMonth</th>
      <th>FuelType</th>
      <th>Brand</th>
      <th>NotRepaired</th>
      <th>NumberOfPictures</th>
      <th>PostalCode</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>small</td>
      <td>2001</td>
      <td>manual</td>
      <td>75.0</td>
      <td>golf</td>
      <td>150000</td>
      <td>6</td>
      <td>petrol</td>
      <td>volkswagen</td>
      <td>no</td>
      <td>0</td>
      <td>91074</td>
    </tr>
    <tr>
      <th>1</th>
      <td>small</td>
      <td>2008</td>
      <td>manual</td>
      <td>69.0</td>
      <td>fabia</td>
      <td>90000</td>
      <td>7</td>
      <td>gasoline</td>
      <td>skoda</td>
      <td>no</td>
      <td>0</td>
      <td>60437</td>
    </tr>
    <tr>
      <th>2</th>
      <td>sedan</td>
      <td>1995</td>
      <td>manual</td>
      <td>102.0</td>
      <td>3er</td>
      <td>150000</td>
      <td>10</td>
      <td>petrol</td>
      <td>bmw</td>
      <td>yes</td>
      <td>0</td>
      <td>33775</td>
    </tr>
    <tr>
      <th>3</th>
      <td>convertible</td>
      <td>2004</td>
      <td>manual</td>
      <td>109.0</td>
      <td>2_reihe</td>
      <td>150000</td>
      <td>8</td>
      <td>petrol</td>
      <td>peugeot</td>
      <td>no</td>
      <td>0</td>
      <td>67112</td>
    </tr>
    <tr>
      <th>4</th>
      <td>sedan</td>
      <td>2004</td>
      <td>manual</td>
      <td>105.0</td>
      <td>3_reihe</td>
      <td>150000</td>
      <td>12</td>
      <td>petrol</td>
      <td>mazda</td>
      <td>no</td>
      <td>0</td>
      <td>96224</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>227074</th>
      <td>sedan</td>
      <td>2008</td>
      <td>manual</td>
      <td>105.0</td>
      <td>leon</td>
      <td>150000</td>
      <td>7</td>
      <td>gasoline</td>
      <td>seat</td>
      <td>no</td>
      <td>0</td>
      <td>45896</td>
    </tr>
    <tr>
      <th>227075</th>
      <td>sedan</td>
      <td>2010</td>
      <td>manual</td>
      <td>140.0</td>
      <td>golf</td>
      <td>150000</td>
      <td>7</td>
      <td>gasoline</td>
      <td>volkswagen</td>
      <td>no</td>
      <td>0</td>
      <td>75223</td>
    </tr>
    <tr>
      <th>227076</th>
      <td>sedan</td>
      <td>2004</td>
      <td>manual</td>
      <td>225.0</td>
      <td>leon</td>
      <td>150000</td>
      <td>5</td>
      <td>petrol</td>
      <td>seat</td>
      <td>yes</td>
      <td>0</td>
      <td>96465</td>
    </tr>
    <tr>
      <th>227077</th>
      <td>convertible</td>
      <td>2000</td>
      <td>auto</td>
      <td>101.0</td>
      <td>fortwo</td>
      <td>125000</td>
      <td>3</td>
      <td>petrol</td>
      <td>smart</td>
      <td>no</td>
      <td>0</td>
      <td>26135</td>
    </tr>
    <tr>
      <th>227078</th>
      <td>bus</td>
      <td>1996</td>
      <td>manual</td>
      <td>102.0</td>
      <td>transporter</td>
      <td>150000</td>
      <td>3</td>
      <td>gasoline</td>
      <td>volkswagen</td>
      <td>no</td>
      <td>0</td>
      <td>87439</td>
    </tr>
  </tbody>
</table>
<p>227079 rows × 12 columns</p>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-9f410d3c-1cc5-4a1c-9c28-ad1f36189c93')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/>
  </svg>
      </button>

  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-9f410d3c-1cc5-4a1c-9c28-ad1f36189c93 button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-9f410d3c-1cc5-4a1c-9c28-ad1f36189c93');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>





```python
features_dumm.shape
```




    (227079, 12)




```python
target_dumm.shape
```




    (227079,)




```python
# прямое кодирование
features_dumm = pd.get_dummies(features_dumm, drop_first=True)
```


```python
# порядковое кодирование
ord_enc = OrdinalEncoder()
```


```python
features_Ord[['VehicleType', 'Gearbox', 'Model', 'FuelType', 'Brand', 'NotRepaired']] = ord_enc.fit_transform(features_Ord[['VehicleType', 'Gearbox', 'Model', 'FuelType', 'Brand', 'NotRepaired']])
```


```python
# деление на обучающую и валидационно-тестовую выборку (60:40)
features_train_dumm, features_valid_test_dumm, target_train_dumm, target_valid_test_dumm = train_test_split(
    features_dumm, target_dumm, test_size=0.4, random_state=12345)
```


```python
# деление валидационно-тестовой выборки (50:50)
features_valid_dumm, features_test_dumm, target_valid_dumm, target_test_dumm = train_test_split(
    features_valid_test_dumm, target_valid_test_dumm, test_size=0.5, random_state=12345)
```


```python
# деление на обучающую и валидационно-тестовую выборку (60:40)
features_train_Ord, features_valid_test_Ord, target_train_Ord, target_valid_test_Ord = train_test_split(
    features_Ord, target_Ord, test_size=0.4, random_state=12345)
```


```python
# деление валидационно-тестовой выборки (50:50)
features_valid_Ord, features_test_Ord, target_valid_Ord, target_test_Ord = train_test_split(
    features_valid_test_Ord, target_valid_test_Ord, test_size=0.5, random_state=12345)
```


```python
# масштабирование признаков
numeric = ['RegistrationYear', 'Power', 'Kilometer', 'RegistrationMonth', 'NumberOfPictures','PostalCode']

scaler = StandardScaler()
scaler.fit(features_dumm[numeric])
features_dumm[numeric] = scaler.transform(features_dumm[numeric])
```


```python
# масштабирование признаков
numeric = ['RegistrationYear', 'Power', 'Kilometer', 'RegistrationMonth', 'NumberOfPictures','PostalCode']

scaler = StandardScaler()
scaler.fit(features_Ord[numeric])
features_Ord[numeric] = scaler.transform(features_Ord[numeric])
```


```python
features_dumm.head(3)
```





  <div id="df-b62395e2-a22a-4b61-b620-c8dd577f4559">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>RegistrationYear</th>
      <th>Power</th>
      <th>Kilometer</th>
      <th>RegistrationMonth</th>
      <th>NumberOfPictures</th>
      <th>PostalCode</th>
      <th>VehicleType_convertible</th>
      <th>VehicleType_coupe</th>
      <th>VehicleType_other</th>
      <th>VehicleType_sedan</th>
      <th>...</th>
      <th>Brand_saab</th>
      <th>Brand_seat</th>
      <th>Brand_skoda</th>
      <th>Brand_smart</th>
      <th>Brand_subaru</th>
      <th>Brand_suzuki</th>
      <th>Brand_toyota</th>
      <th>Brand_volkswagen</th>
      <th>Brand_volvo</th>
      <th>NotRepaired_yes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.386434</td>
      <td>-0.908448</td>
      <td>0.619292</td>
      <td>-0.065857</td>
      <td>0.0</td>
      <td>1.516718</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.802918</td>
      <td>-1.016750</td>
      <td>-1.000968</td>
      <td>0.224137</td>
      <td>0.0</td>
      <td>0.330551</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-1.405879</td>
      <td>-0.421085</td>
      <td>0.619292</td>
      <td>1.094121</td>
      <td>0.0</td>
      <td>-0.701717</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 305 columns</p>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-b62395e2-a22a-4b61-b620-c8dd577f4559')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/>
  </svg>
      </button>

  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-b62395e2-a22a-4b61-b620-c8dd577f4559 button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-b62395e2-a22a-4b61-b620-c8dd577f4559');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>





```python
features_Ord.head(3)
```





  <div id="df-270dc889-f553-403d-90b1-cbcbf70ac535">
    <div class="colab-df-container">
      <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>VehicleType</th>
      <th>RegistrationYear</th>
      <th>Gearbox</th>
      <th>Power</th>
      <th>Model</th>
      <th>Kilometer</th>
      <th>RegistrationMonth</th>
      <th>FuelType</th>
      <th>Brand</th>
      <th>NotRepaired</th>
      <th>NumberOfPictures</th>
      <th>PostalCode</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>5.0</td>
      <td>-0.386434</td>
      <td>1.0</td>
      <td>-0.908448</td>
      <td>115.0</td>
      <td>0.619292</td>
      <td>-0.065857</td>
      <td>6.0</td>
      <td>36.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.516718</td>
    </tr>
    <tr>
      <th>1</th>
      <td>5.0</td>
      <td>0.802918</td>
      <td>1.0</td>
      <td>-1.016750</td>
      <td>100.0</td>
      <td>-1.000968</td>
      <td>0.224137</td>
      <td>2.0</td>
      <td>31.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.330551</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4.0</td>
      <td>-1.405879</td>
      <td>1.0</td>
      <td>-0.421085</td>
      <td>11.0</td>
      <td>0.619292</td>
      <td>1.094121</td>
      <td>6.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>-0.701717</td>
    </tr>
  </tbody>
</table>
</div>
      <button class="colab-df-convert" onclick="convertToInteractive('df-270dc889-f553-403d-90b1-cbcbf70ac535')"
              title="Convert this dataframe to an interactive table."
              style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z"/><path d="M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z"/>
  </svg>
      </button>

  <style>
    .colab-df-container {
      display:flex;
      flex-wrap:wrap;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

      <script>
        const buttonEl =
          document.querySelector('#df-270dc889-f553-403d-90b1-cbcbf70ac535 button.colab-df-convert');
        buttonEl.style.display =
          google.colab.kernel.accessAllowed ? 'block' : 'none';

        async function convertToInteractive(key) {
          const element = document.querySelector('#df-270dc889-f553-403d-90b1-cbcbf70ac535');
          const dataTable =
            await google.colab.kernel.invokeFunction('convertToInteractive',
                                                     [key], {});
          if (!dataTable) return;

          const docLinkHtml = 'Like what you see? Visit the ' +
            '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
            + ' to learn more about interactive tables.';
          element.innerHTML = '';
          dataTable['output_type'] = 'display_data';
          await google.colab.output.renderOutput(dataTable, element);
          const docLink = document.createElement('div');
          docLink.innerHTML = docLinkHtml;
          element.appendChild(docLink);
        }
      </script>
    </div>
  </div>





```python
features_Ord.shape
```




    (227079, 12)




```python
features_dumm.shape
```




    (227079, 305)



## Обучение моделей

### LinearRegression


```python
# на данных с прямым кодированием
%%time
# расчет для LinearRegression
dumm_model_LinearRegression = LinearRegression()
dumm_model_LinearRegression.fit(features_train_dumm, target_train_dumm)
y_true = target_valid_dumm
y_pred = pd.DataFrame(dumm_model_LinearRegression.predict(features_valid_dumm))

result = mean_squared_error(y_true, y_pred)**0.5
result_1 = r2_score(y_true, y_pred)

print("Модель:", dumm_model_LinearRegression)
print("RMSE:", round(result, 1))
print("R2:", round(result_1, 3))
```

    Модель: LinearRegression()
    RMSE: 2566.0
    R2: 0.71
    CPU times: user 7.33 s, sys: 672 ms, total: 8 s
    Wall time: 4.52 s
    


```python
# на данных с порядковым кодированием
%%time
# расчет для LinearRegression
model_LinearRegression = LinearRegression()
model_LinearRegression.fit(features_train_Ord, target_train_Ord)
y_true = target_valid_Ord
y_pred = pd.DataFrame(model_LinearRegression.predict(features_valid_Ord))

result = mean_squared_error(y_true, y_pred)**0.5
result_1 = r2_score(y_true, y_pred)

print("Модель:", model_LinearRegression)
print("RMSE:", round(result, 1))
print("R2:", round(result_1, 3))
```

    Модель: LinearRegression()
    RMSE: 2954.3
    R2: 0.615
    CPU times: user 89.1 ms, sys: 69.4 ms, total: 158 ms
    Wall time: 83.1 ms
    

### RandomForestRegressor


```python
# на данных с прямым кодированием
%%time
# подбор гиперпараметров: глубины дерева, числа деревьев на основе RMSE
dumm_best_model_RandomForestRegressor = None
best_result = 100000000
best_result_1 = 0
for depth in range(1, 6, 1):
  for est in range(1, 6, 1):
    model = RandomForestRegressor(n_estimators=est, max_depth=depth, random_state=12345)
    model.fit(features_train_dumm, target_train_dumm)
    
    y_true = target_valid_dumm
    y_pred = pd.DataFrame(model.predict(features_valid_dumm))

    result = mean_squared_error(y_true, y_pred)**0.5
    result_1 = r2_score(y_true, y_pred)
    if result < best_result:
      dumm_best_model_RandomForestRegressor = model
      best_result = result
      best_result_1 = result_1

print("Лучшие параметры модели:", dumm_best_model_RandomForestRegressor)
print("RMSE:", round(best_result, 1))
print("R2:", round(result_1, 3))
```

    Лучшие параметры модели: RandomForestRegressor(max_depth=5, n_estimators=5, random_state=12345)
    RMSE: 2375.6
    R2: 0.751
    CPU times: user 46.4 s, sys: 209 ms, total: 46.6 s
    Wall time: 46.4 s
    


```python
# на данных с порядковым кодированием
%%time
# подбор гиперпараметров: глубины дерева, числа деревьев на основе RMSE
best_model_RandomForestRegressor = None
best_result = 100000000
best_result_1 = 0
for depth in range(1, 6, 1):
  for est in range(1, 6, 1):
    model = RandomForestRegressor(n_estimators=est, max_depth=depth, random_state=12345)
    model.fit(features_train_Ord, target_train_Ord)
    
    y_true = target_valid_Ord
    y_pred = pd.DataFrame(model.predict(features_valid_Ord))

    result = mean_squared_error(y_true, y_pred)**0.5
    result_1 = r2_score(y_true, y_pred)
    if result < best_result:
      best_model_RandomForestRegressor = model
      best_result = result
      best_result_1 = result_1

print("Лучшие параметры модели:", best_model_RandomForestRegressor)
print("RMSE:", round(best_result, 1))
print("R2:", round(result_1, 3))
```

    Лучшие параметры модели: RandomForestRegressor(max_depth=5, n_estimators=5, random_state=12345)
    RMSE: 2379.1
    R2: 0.75
    CPU times: user 9.3 s, sys: 36.1 ms, total: 9.34 s
    Wall time: 9.34 s
    

### DecisionTreeRegressor


```python
# на данных с прямым кодированием
%%time
# подбор гиперпараметров: глубины дерева, минимального числа samples_split на основе RMSE
dumm_best_model_DecisionTreeRegressor = None
best_result = 100000000
best_result_1 = 0
for depth in range(1, 6, 1):
  for spl in range(2, 7, 1):
    model = DecisionTreeRegressor(max_depth=depth, min_samples_split=spl, random_state=12345)
    model.fit(features_train_dumm, target_train_dumm)
    
    y_true = target_valid_dumm
    y_pred = pd.DataFrame(model.predict(features_valid_dumm))

    result = mean_squared_error(y_true, y_pred)**0.5
    result_1 = r2_score(y_true, y_pred)
    if result < best_result:
      dumm_best_model_DecisionTreeRegressor = model
      best_result = result
      best_result_1 = result_1

print("Лучшие параметры модели:", dumm_best_model_DecisionTreeRegressor)
print("RMSE:", round(best_result, 1))
print("R2:", round(result_1, 3))
```

    Лучшие параметры модели: DecisionTreeRegressor(max_depth=5, random_state=12345)
    RMSE: 2411.9
    R2: 0.743
    CPU times: user 24 s, sys: 110 ms, total: 24.1 s
    Wall time: 25 s
    


```python
# на данных с порядковым кодированием
%%time
# подбор гиперпараметров: глубины дерева, минимального числа samples_split на основе RMSE
best_model_DecisionTreeRegressor = None
best_result = 100000000
best_result_1 = 0
for depth in range(1, 6, 1):
  for spl in range(2, 7, 1):
    model = DecisionTreeRegressor(max_depth=depth, min_samples_split=spl, random_state=12345)
    model.fit(features_train_Ord, target_train_Ord)
    
    y_true = target_valid_Ord
    y_pred = pd.DataFrame(model.predict(features_valid_Ord))

    result = mean_squared_error(y_true, y_pred)**0.5
    result_1 = r2_score(y_true, y_pred)
    if result < best_result:
      best_model_DecisionTreeRegressor = model
      best_result = result
      best_result_1 = result_1

print("Лучшие параметры модели:", best_model_DecisionTreeRegressor)
print("RMSE:", round(best_result, 1))
print("R2:", round(result_1, 3))
```

    Лучшие параметры модели: DecisionTreeRegressor(max_depth=5, random_state=12345)
    RMSE: 2416.4
    R2: 0.742
    CPU times: user 5.2 s, sys: 63.7 ms, total: 5.27 s
    Wall time: 5.35 s
    

### DummyRegressor


```python
# на данных с прямым кодированием
%%time
# подбор гиперпараметров: ['mean', 'median'] на основе RMSE
dumm_best_model_DummyRegressor = None
best_result = 100000000
best_result_1 = 0
list_strategy = ['mean', 'median']
for strat in list_strategy:
  model = DummyRegressor(strategy=strat)
  model.fit(features_train_dumm, target_train_dumm)

  y_true = target_valid_dumm
  y_pred = pd.DataFrame(model.predict(features_valid_dumm))
  
  result = mean_squared_error(y_true, y_pred)**0.5
  result_1 = r2_score(y_true, y_pred)
  if result < best_result:
    dumm_best_model_DummyRegressor = model
    best_result = result
    best_result_1 = result_1

print("Лучшие параметры модели:", dumm_best_model_DummyRegressor)
print("RMSE:", round(best_result, 1))
print("R2:", round(result_1, 3))
```

    Лучшие параметры модели: DummyRegressor()
    RMSE: 4761.5
    R2: -0.113
    CPU times: user 15.5 ms, sys: 0 ns, total: 15.5 ms
    Wall time: 14.5 ms
    


```python
# на данных с порядковым кодированием
%%time
# подбор гиперпараметров: ['mean', 'median'] на основе RMSE
best_model_DummyRegressor = None
best_result = 100000000
best_result_1 = 0
list_strategy = ['mean', 'median']
for strat in list_strategy:
  model = DummyRegressor(strategy=strat)
  model.fit(features_train_Ord, target_train_Ord)

  y_true = target_valid_Ord
  y_pred = pd.DataFrame(model.predict(features_valid_Ord))
  
  result = mean_squared_error(y_true, y_pred)**0.5
  result_1 = r2_score(y_true, y_pred)
  if result < best_result:
    best_model_DummyRegressor = model
    best_result = result
    best_result_1 = result_1

print("Лучшие параметры модели:", best_model_DummyRegressor)
print("RMSE:", round(best_result, 1))
print("R2:", round(result_1, 3))
```

    Лучшие параметры модели: DummyRegressor()
    RMSE: 4761.5
    R2: -0.113
    CPU times: user 23.8 ms, sys: 2.01 ms, total: 25.8 ms
    Wall time: 23.7 ms
    

### LGBMRegressor


```python
# на данных с прямым кодированием
%%time
# подбор гиперпараметров: глубины дерева, числа деревьев на основе RMSE
dumm_best_model_LGBMRegressor = None
best_result = 100000000
best_result_1 = 0
for depth in range(1, 6, 1):
  for est in range(1, 6, 1):
    model = LGBMRegressor(n_estimators=est, max_depth=depth, random_state=12345)
    model.fit(features_train_dumm, target_train_dumm)
    
    y_true = target_valid_dumm
    y_pred = pd.DataFrame(model.predict(features_valid_dumm))

    result = mean_squared_error(y_true, y_pred)**0.5
    result_1 = r2_score(y_true, y_pred)
    if result < best_result:
      dumm_best_model_LGBMRegressor = model
      best_result = result
      best_result_1 = result_1

print("Лучшие параметры модели:", dumm_best_model_LGBMRegressor)
print("RMSE:", round(best_result, 1))
print("R2:", round(result_1, 3))
```

    Лучшие параметры модели: LGBMRegressor(max_depth=5, n_estimators=5, random_state=12345)
    RMSE: 3399.2
    R2: 0.49
    CPU times: user 40.5 s, sys: 1.78 s, total: 42.3 s
    Wall time: 29.5 s
    


```python
# на данных с порядковым кодированием
%%time
# подбор гиперпараметров: глубины дерева, числа деревьев на основе RMSE
best_model_LGBMRegressor = None
best_result = 100000000
best_result_1 = 0
for depth in range(1, 6, 1):
  for est in range(1, 6, 1):
    model = LGBMRegressor(n_estimators=est, max_depth=depth, random_state=12345)
    model.fit(features_train_Ord, target_train_Ord)
    
    y_true = target_valid_Ord
    y_pred = pd.DataFrame(model.predict(features_valid_Ord))

    result = mean_squared_error(y_true, y_pred)**0.5
    result_1 = r2_score(y_true, y_pred)
    if result < best_result:
      best_model_LGBMRegressor = model
      best_result = result
      best_result_1 = result_1

print("Лучшие параметры модели:", best_model_LGBMRegressor)
print("RMSE:", round(best_result, 1))
print("R2:", round(result_1, 3))
```

    Лучшие параметры модели: LGBMRegressor(max_depth=5, n_estimators=5, random_state=12345)
    RMSE: 3400.7
    R2: 0.49
    CPU times: user 10.2 s, sys: 88.3 ms, total: 10.3 s
    Wall time: 5.63 s
    

## Вывод

**В результате обучение моделей на данных с прямым кодированием и порядковым соответственно, установлено:**

1. Модель: LinearRegression(). RMSE: 2566. CPU times: user около 7 s. Модель: LinearRegression(). RMSE: 2954. CPU times: user около 89 ms.
2. Лучшие параметры модели: RandomForestRegressor(max_depth=5, n_estimators=5, random_state=12345). RMSE: 2376. CPU times: user около 46 s. Лучшие параметры модели: RandomForestRegressor(max_depth=5, n_estimators=5, random_state=12345). RMSE: 2379. CPU times: user около 9 s.
3. Лучшие параметры модели: DecisionTreeRegressor(max_depth=5, random_state=12345). RMSE: 2412. CPU times: user около 24 s. Лучшие параметры модели: DecisionTreeRegressor(max_depth=5, random_state=12345). RMSE: 2416. CPU times: user около 5 s.
4. Модель: DummyRegressor() RMSE: 4762. CPU times: user около 16 ms. Модель: DummyRegressor() RMSE: RMSE: 4762. CPU times: user около 24 ms.
5. Лучшие параметры модели: LGBMRegressor(max_depth=5, n_estimators=5, random_state=12345). RMSE: 3399. CPU times: user около 41 s. Лучшие параметры модели: LGBMRegressor(max_depth=5, n_estimators=5, random_state=12345). RMSE: 3401. CPU times: user около 10 s.


## Анализ моделей


```python
dumm_list_model = [dumm_model_LinearRegression, dumm_best_model_RandomForestRegressor, dumm_best_model_DecisionTreeRegressor, dumm_best_model_DummyRegressor, dumm_best_model_LGBMRegressor]
```


```python
# поиск наилучшей модели на ТЕСТОВОЙ выборке
best_model = None
best_result = 100000000
for mod in dumm_list_model:
  test_predictions = mod.predict(features_test_dumm)
  y_true = target_test_dumm
  y_pred = pd.DataFrame(mod.predict(features_test_dumm))
  result = mean_squared_error(y_true, y_pred)**0.5
  if result < best_result:
    best_result = result
    best_model = mod

print("Наилучшая модель на ТЕСТОВОЙ выборке:", best_model)
print("RMSE наилучшей модели =", round(best_result, 1))
```

    Наилучшая модель на ТЕСТОВОЙ выборке: RandomForestRegressor(max_depth=5, n_estimators=5, random_state=12345)
    RMSE наилучшей модели = 2336.4
    


```python
list_model = [model_LinearRegression, best_model_RandomForestRegressor, best_model_DecisionTreeRegressor, best_model_DummyRegressor, best_model_LGBMRegressor]
```


```python
# поиск наилучшей модели на ТЕСТОВОЙ выборке
best_model = None
best_result = 100000000
for mod in list_model:
  test_predictions = mod.predict(features_test_Ord)
  y_true = target_test_Ord
  y_pred = pd.DataFrame(mod.predict(features_test_Ord))
  result = mean_squared_error(y_true, y_pred)**0.5
  if result < best_result:
    best_result = result
    best_model = mod

print("Наилучшая модель на ТЕСТОВОЙ выборке:", best_model)
print("RMSE наилучшей модели =", round(best_result, 1))
```

    Наилучшая модель на ТЕСТОВОЙ выборке: RandomForestRegressor(max_depth=5, n_estimators=5, random_state=12345)
    RMSE наилучшей модели = 2340.1
    

# Общий вывод

**I. В результате подготовки данных установлено:**

1. В столбце VehicleType (тип автомобильного кузова) - 10.6 % пропусков. Тип данных - object.
2. В столбце Gearbox (тип коробки передач) - 5.6 % пропусков. Тип данных - object.
3. В столбце Model (модель автомобиля) - 5.6 % пропусков. Тип данных - object.
4. В столбце FuelType (тип топлива) - 9.3 % пропусков. Тип данных - object.
5. В столбце NotRepaired (была машина в ремонте или нет) - 20.1 % пропусков. Тип данных - object.
6. Среди первых пяти потенциальных неявных дубликатов в списке (df['DateCrawled'].value_counts(ascending=False)) - неявные дубликаты не обнаружены.
7. Тип данных либо 'int', либо 'object'.
8. Аномальных данных в столбце 'RegistrationYear' порядка 4 %.
9. Аномальных данных в столбце 'Power' порядка 14 %.
10. Также имеется не значительное количество аномальных данных в столбце 'Price'.

**II. Процент не корректных данных очень большой (аномалий и пропусков). В целом, данных достаточно много (354369) и основная задача создать модель, которая будет точно предсказывать стоимость (значение метрики RMSE должно быть меньше 2500). Обучающие данные должны быть максимально приближены к реальным, однако, при заполнении пропусков средними или медианными значениями это может привести к недостаточно точной работе модели, плюс наличие большого количества аномалий также пагубно скажется на качестве модели. Устранение пропусков и аномалий через удаление - это то, что не повлияет на истинность оставшихся значений по которым будет обучаться модель. Попробуем пойти именно по этому пути и, если удастся достичь значения метрики RMSE меньше 2500 - будем считать, что примененный способ борьбы с пропусками и аномалиями уместен.**

**III. В результате обучение моделейна на данных с прямым кодированием и порядковым соответственно, установлено:**

1. Модель: LinearRegression(). RMSE: 2566. CPU times: user около 7 s. Модель: LinearRegression(). RMSE: 2954. CPU times: user около 89 ms.
2. Лучшие параметры модели: RandomForestRegressor(max_depth=5, n_estimators=5, random_state=12345). RMSE: 2376. CPU times: user около 46 s. Лучшие параметры модели: RandomForestRegressor(max_depth=5, n_estimators=5, random_state=12345). RMSE: 2379. CPU times: user около 9 s.
3. Лучшие параметры модели: DecisionTreeRegressor(max_depth=5, random_state=12345). RMSE: 2412. CPU times: user около 24 s. Лучшие параметры модели: DecisionTreeRegressor(max_depth=5, random_state=12345). RMSE: 2416. CPU times: user около 5 s.
4. Модель: DummyRegressor() RMSE: 4762. CPU times: user около 16 ms. Модель: DummyRegressor() RMSE: RMSE: 4762. CPU times: user около 24 ms.
5. Лучшие параметры модели: LGBMRegressor(max_depth=5, n_estimators=5, random_state=12345). RMSE: 3399. CPU times: user около 41 s. Лучшие параметры модели: LGBMRegressor(max_depth=5, n_estimators=5, random_state=12345). RMSE: 3401. CPU times: user около 10 s.


**IV. В результате анализа моделей, установлено:**

1. Наилучшая модель на ТЕСТОВОЙ выборке: RandomForestRegressor(max_depth=5, n_estimators=5, random_state=12345).
2. RMSE наилучшей модели на данных с прямым кодированием = 2336.4.
3. RMSE наилучшей модели на данных с порядковым кодированием = 2340.1.
